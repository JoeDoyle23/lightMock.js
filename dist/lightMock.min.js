/*! lightMock.js - v0.5.0 - 2012-06-12
* https://github.com/JoeDoyle23/lightMock.js
* Copyright (c) 2012 Joe Doyle; Licensed MIT */
(function(a){a.Mock=function(){var a={stubs:[],raiseFail:function(a){ok(!1,a)},raiseSuccess:function(a){ok(!0,a)},restoreAll:function(){for(var a=0;a<this.stubs.length;a++)this.stubs[a].restore(0);this.stubs.length=0},extend:function(b){var c=this.stubs;return b.stub=function(d,e){var f=null,g=0,h=[],i=b[d];b[d]=function(){return++g,f!==null&&f<g&&a.raiseFail("'"+d+"' has been called more than the limit of "+f),h=arguments,e.apply(b,arguments)};var j=b[d];return j.original=i,j.parameters=function(a){return h[a]},j.restore=function(){if(!!b[d].original){b[d]=b[d].original;var a=c.indexOf(b[d]);a>=0&&c.splice(a,1)}return b},j.atMost=function(a){return f=a,j},j.assert={calledExactly:function(b){return g!==b&&a.raiseFail("'"+d+"' was called "+g+" time(s) but expecting "+b),a.raiseSuccess("'"+d+"' was called "+g+" time(s)"),j},callCount:function(){return g}},a.stubs.push(j),j},b},xhrResult:{callResults:{},callStatus:"fail",setup:function(a){this.callResults=a.results,this.callStatus=a.status},done:function(a){return this.callStatus==="success"&&a(this.callResults),this},fail:function(a){return this.callStatus==="fail"&&a(),this},always:function(a){return a(),this},success:function(a){return this.callStatus==="success"&&a(this.callResults),this},error:function(a){return this.callStatus==="fail"&&a(),this},compelte:function(a){return a(),this}}};return a}})(window);